/*!
 Inventario by LivelyWorks - http://livelyworks.net
 version: 1.x
 --------------------------------------------------------------------- 
 Build Timestamp: 1665666018
 Build Date: Thu Oct 13 2022 18:30:18 GMT+0530 (India Standard Time)
--------------------------------------------------------------------- */
!function(a){"use strict";window.angular.module("CommonApp.users",[]).controller("UserProfileController",["__Form","appServices","CommonUserDataService",function(t,e,o){var i=this;(i=t.setup(i,"user_profile__form","profileData")).request_completed=!1,o.getUserProfileDetails().then(function(e){t.updateModel(i,e.data.profile),i.existingProfilePictureURL=e.data.existingProfilePictureURL,i.request_completed=!0})}]).controller("UserProfileEditController",["$scope","__Form","appServices","lwFileUploader","__Utils","$state","CommonUserDataService","$rootScope",function(o,t,i,e,s,a,n,r){var l=this;(l=t.setup(l,"user_profile_edit_form","profileData")).request_completed=!1,l.countries=[],n.getUserProfileEditData().then(function(e){e=e.data;t.updateModel(l,e.profile),l.existingProfilePictureURL=e.existingProfilePictureURL,l.countries=e.countries,l.request_completed=!0}),l.countrySelectConfig=__globals.getSelectizeOptions(),l.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#imageListItemTemplate",e)},option:function(e,t){return s.template("#imageListOptionTemplate",e)}},searchField:["name"]}),l.typeSelectConfig=__globals.getSelectizeOptions({valueField:"id",labelField:"title",searchField:["title"]}),l.retrieveSpecificFiles=function(){e.getTempUploadedFiles(l,{url:s.apiURL("media.upload.read_user_profile")},function(e){l.profileFiles=e,l.profileFilesCount=e.length})},l.retrieveSpecificFiles(),r.$on("lw-loader-event-start",function(e,t){o.loading=!0,$("#lwFileupload").attr("disabled",!0)}),r.$on("lw-loader-event-stop",function(e,t){o.loading=!1,$("#lwFileupload").attr("disabled",!1)}),o.upload=function(){e.upload({url:s.apiURL("media.upload.write.user_profile")},function(e){l.retrieveSpecificFiles()})},o.showUploadedMediaDialog=function(){e.openDialog(l,{url:s.apiURL("media.upload.read_user_profile")},function(e){l.retrieveSpecificFiles()})},l.submit=function(){t.process("user.profile.update",l).success(function(e){var t=e.data;i.processResponse(e,null,function(){r.$broadcast("auth_info_updated",t),a.go("profile")})})}}]).controller("UserChangePasswordController",["__Form","appServices","__Utils","$state",function(e,t,o,i){var s=this;(s=e.setup(s,"user_password_update_form","userData",{secured:!0})).submit=function(){e.process("user.change_password.process",s).success(function(e){t.processResponse(e,null,function(){s.userData={},document.location.href==e.data.passwordRoute?a.location=a.appConfig.appBaseURL:i.go("dashboard")})})}}]).controller("UserChangeEmailController",["__Form","appServices","CommonUserDataService",function(e,o,t){var i=this;i.requestSuccess=!1,i=e.setup(i,"user_change_email_form","userData",{secured:!0}),t.getChangeEmailSupportData().then(function(e){e=e.data;i.changeEmail=e.newEmail,i.current_email=e.current_email}),i.submit=function(){e.process("user.change_email.process",i).success(function(e){var t=e.data;o.processResponse(e,null,function(){i.activationRequired=t.activationRequired,i.requestSuccess=!0,$(".lw-form").slideUp()})})}}]).controller("UserLoginDialogController",["__Form","__Auth","appServices","__Utils","$scope","CommonUserDataService",function(e,o,i,t,s,a){var n=this,r=s.ngDialogData,n=e.setup(n,"user_login_form","loginData",{secured:!0});_.has(r,"from")&&(n.loginData.from=r.from),n.show_captcha=!1,n.request_completed=!1,a.getLoginAttempts().then(function(e){n.show_captcha=e.data.show_captcha,n.request_completed=!0}),n.getCaptchaURL=function(){return t.apiURL("security.captcha")+"?ver="+Math.random()},n.refreshCaptcha=function(){n.captchaURL=n.getCaptchaURL()},n.captchaURL=n.getCaptchaURL(),n.submit=function(){n.isInActive=!1,n.accountDeleted=!1,e.process("user.login",n).success(function(e){var t=e.data;i.processResponse(e,{error:function(){n.show_captcha=t.show_captcha,n[n.ngFormModelName].password="",n.show_captcha&&(n[n.ngFormModelName].confirmation_code="",n.refreshCaptcha())},otherError:function(e){n.isInActive=t.isInActive,n.accountDeleted=t.accountDeleted,3==e&&n.show_captcha&&n.refreshCaptcha()}},function(){o.checkIn(t.auth_info,function(){t.availableRoutes&&__globals.appImmutable("availableRoutes",t.availableRoutes)}),s.closeThisDialog({login_success:!0})})})},n.closeDialog=function(){s.closeThisDialog({login_success:!1})}}])}(window),function(){"use strict";window.angular.module("CommonApp.CommonUserDataService",[]).service("CommonUserDataService",["$q","__DataStore","__Form","appServices","__Utils",function(e,t,i,s,a){this.getUserProfileDetails=function(){var o=e.defer();return t.fetch("user.profile.details").success(function(t){s.processResponse(t,null,function(e){o.resolve(t)})}),o.promise},this.getUserProfileEditData=function(){var o=e.defer();return i.fetch("user.profile.edit_support_data").success(function(t){s.processResponse(t,null,function(e){o.resolve(t)})}),o.promise},this.getTempImagesData=function(){var o=e.defer();return i.fetch(a.apiURL("media.uploaded.images")+"?fileRequestType=1",{fresh:!0}).success(function(t){s.processResponse(t,null,function(e){o.resolve(t)})}),o.promise},this.getChangeEmailSupportData=function(){var o=e.defer();return i.fetch("user.change_email.support_data").success(function(t){s.processResponse(t,null,function(e){o.resolve(t)})}),o.promise},this.getLoginAttempts=function(){var o=e.defer();return i.fetch("user.login.attempts").success(function(t){s.processResponse(t,null,function(e){o.resolve(t)})}),o.promise}}])}(window),function(){"use strict";window.angular.module("app.UploaderDataService",[]).service("UploaderDataService",["$q","__Utils","__DataStore","appServices",function(t,i,s,a){this.readUploadedMedia=function(e){var o=t.defer();return s.fetch(i.apiURL("media.uploaded.images")+"?fileRequestType="+e,{fresh:!0}).success(function(t){a.processResponse(t,null,function(e){o.resolve(t)})}),o.promise},this.readUploadedImages=function(e){var o=t.defer();return s.fetch("media.uploaded.images.detail",{fresh:!0}).success(function(t){a.processResponse(t,null,function(e){o.resolve(t)})}),o.promise}}])}(window),function(){"use strict";window.angular.module("app.UploaderEngine",[]).controller("uploadedFileDialogController",["$scope","__DataStore","appServices","appNotify","__Utils","lwFileUploader","$rootScope",function(t,e,o,i,s,a,n){var r=this;r.showLoader=!0,r.ngDialogData=t.ngDialogData,r.getTempUploadedMedia=function(){a.mediaDataService(r.ngDialogData.url).then(function(e){r.uploadedFiles=e.data.files,r.showLoader=!1})},r.delete=function(t){e.post({apiURL:"media.upload.delete",fileName:t},r).success(function(e){o.processResponse(e,null,function(){$("#lw_"+t).fadeOut("slow",function(){$(this).remove()}),n.$emit("lw.media.deleted",{fileName:t}),r.getTempUploadedMedia()})})},r.deleteMultipleFiles=function(){e.post("media.upload.delete_multiple",r).success(function(e){o.processResponse(e,null,function(){r.getTempUploadedMedia(),n.$emit("lw.multiple.media.deleted",{uploadedFiles:r.uploadedFiles})})})},r.selectFiles=function(){e.post("media.upload.select_files",r).success(function(e){o.processResponse(e,null,function(){t.closeThisDialog({selectedData:e.data.selectedFiles})})})},r.getTempUploadedMedia(),r.closeDialog=function(){t.closeThisDialog()}}])}(window);